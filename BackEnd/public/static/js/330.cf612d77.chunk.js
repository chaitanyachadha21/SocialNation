"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[330],{5169:(e,s,n)=>{n.r(s),n.d(s,{default:()=>_});var r=n(5043),t=n(1688),c=n(837),a=n(5855),o=n(8630),l=n(9350),i=n(4068),d=n(2077),h=n(9869),m=(n(6433),n(228)),x=n.n(m),u=n(7024),j=n(1071),p=n(579);const A=new(x().Icon)({iconUrl:u,shadowUrl:j,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]}),f=e=>{let{center:s,zoom:n}=e;return(0,p.jsxs)(l.W,{center:[s.lat,s.lng],zoom:n,style:{height:"400px",width:"100%"},children:[(0,p.jsx)(i.e,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,p.jsx)(d.p,{position:[s.lat,s.lng],icon:A,children:(0,p.jsx)(h.z,{children:"This is the selected location."})})]})};var g=n(6886),C=n(9626),E=n(8863),v=n(171);const w=e=>{const{isLoading:s,error:n,sendRequest:t,clearError:l}=(0,v.x)(),i=(0,r.useContext)(g.c),[d,h]=(0,r.useState)(!1),[m,x]=(0,r.useState)(!1),u=()=>h(!1),j=()=>{x(!1)};return(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(C.A,{error:n,onClear:l}),(0,p.jsx)(o.A,{show:d,onCancel:u,header:e.address,contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:(0,p.jsx)(a.A,{onClick:u,children:"CLOSE"}),children:(0,p.jsx)("div",{className:"map-container",children:(0,p.jsx)(f,{center:e.coordinates,zoom:16})})}),(0,p.jsx)(o.A,{show:m,onCancel:j,header:"Are you sure?",footerClass:"place-item__modal-actions",footer:(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(a.A,{inverse:!0,onClick:j,children:"CANCEL"}),(0,p.jsx)(a.A,{danger:!0,onClick:async()=>{x(!1);try{await t("https://socialnation.onrender.com/api"+"/places/".concat(e.id),"DELETE",null,{Authorization:"Bearer "+i.token}),e.onDelete(e.id)}catch(s){}},children:"DELETE"})]}),children:(0,p.jsx)("p",{children:"Do you want to proceed and delete this place? Please note that it can't be undone thereafter."})}),(0,p.jsx)("li",{className:"place-item",children:(0,p.jsxs)(c.A,{className:"place-item__content",children:[s&&(0,p.jsx)(E.A,{asOverlay:!0}),(0,p.jsx)("div",{className:"place-item__image",children:(0,p.jsx)("img",{src:e.image,alt:e.title})}),(0,p.jsxs)("div",{className:"place-item__info",children:[(0,p.jsx)("h2",{children:e.title}),(0,p.jsx)("h3",{children:e.address}),(0,p.jsx)("p",{children:e.description})]}),(0,p.jsxs)("div",{className:"place-item__actions",children:[(0,p.jsx)(a.A,{inverse:!0,onClick:()=>h(!0),children:"VIEW ON MAP"}),i.userId===e.creatorId&&(0,p.jsx)(a.A,{to:"/places/".concat(e.id),children:"EDIT"}),i.userId===e.creatorId&&(0,p.jsx)(a.A,{danger:!0,onClick:()=>{x(!0)},children:"DELETE"})]})]})})]})},N=e=>0===e.items.length?(0,p.jsx)("div",{className:"place-list center",children:(0,p.jsxs)(c.A,{children:[(0,p.jsx)("h2",{children:"No places found. Maybe create one?"}),(0,p.jsx)(a.A,{to:"/places/new",children:"Share Places"})]})}):(0,p.jsx)("ul",{className:"place-list",children:e.items.map((s=>(0,p.jsx)(w,{id:s.id,image:s.image,title:s.title,description:s.description,address:s.address,creatorId:s.creator,coordinates:s.location,onDelete:e.onDeletePlace},s.id)))}),_=()=>{const e=(0,t.g)().userId,{isLoading:s,error:n,sendRequest:c,clearError:a}=(0,v.x)(),[o,l]=(0,r.useState)();return(0,r.useEffect)((()=>{(async()=>{try{const s=await c("".concat("https://socialnation.onrender.com/api","/places/user/").concat(e));l(s.places)}catch(s){}})()}),[c,e]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(C.A,{error:n,onClear:a}),s&&(0,p.jsx)("div",{className:"center",children:(0,p.jsx)(E.A,{})}),!s&&o&&(0,p.jsx)(N,{items:o,onDeletePlace:e=>{l((s=>s.filter((s=>s.id!==e))))}})]})}},837:(e,s,n)=>{n.d(s,{A:()=>t});n(5043);var r=n(579);const t=e=>(0,r.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})},9626:(e,s,n)=>{n.d(s,{A:()=>a});n(5043);var r=n(8630),t=n(5855),c=n(579);const a=e=>(0,c.jsx)(r.A,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:(0,c.jsx)(t.A,{onClick:e.onClear,children:"Okay"}),children:(0,c.jsx)("p",{children:e.error})})},8630:(e,s,n)=>{n.d(s,{A:()=>d});var r=n(2555),t=n(5043),c=n(7950),a=n(8336),o=n(3006),l=n(579);const i=e=>{const s=(0,l.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[(0,l.jsxs)("header",{className:"modal__header ".concat(e.headerClass),children:[(0,l.jsx)("h2",{children:e.header}),(0,l.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]}),(0,l.jsx)("form",{onSubmit:e.onSubmit?e.onSubmit:e=>e.preventDefault(),children:(0,l.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children})})]});return c.createPortal(s,document.getElementById("modal-hook"))},d=e=>(0,l.jsxs)(t.Fragment,{children:[e.show&&(0,l.jsx)(o.A,{onClick:e.onCancel}),(0,l.jsx)(a.A,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:(0,l.jsx)(i,(0,r.A)({},e))})]})},171:(e,s,n)=>{n.d(s,{x:()=>t});var r=n(5043);const t=()=>{const[e,s]=(0,r.useState)(!1),[n,t]=(0,r.useState)(),c=(0,r.useRef)([]),a=(0,r.useCallback)((async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};s(!0);const o=new AbortController;c.current.push(o);try{const t=await fetch(e,{method:n,body:r,headers:a,signal:o.signal}),l=await t.json();if(c.current=c.current.filter((e=>e!==o)),!t.ok)throw new Error(l.message);return s(!1),l}catch(l){throw t(l.message),s(!1),l}}),[]);return(0,r.useEffect)((()=>()=>{c.current.forEach((e=>e.abort()))}),[]),{isLoading:e,error:n,sendRequest:a,clearError:()=>{t(null)}}}}}]);
//# sourceMappingURL=330.cf612d77.chunk.js.map